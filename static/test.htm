<html>
<head>
<TITLE>Testing JS</TITLE>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <LINK rel="stylesheet" href="style.css" type="text/css">
    <SCRIPT type="text/javascript" src="jquery-2.2.2.min.js" ></SCRIPT>
    <SCRIPT type="text/javascript" src="jquery-ui-1.11.4/jquery-ui.min.js" ></SCRIPT>

<SCRIPT type="text/javascript">
var ct = null; // code translations 
function setTranslations(data) {
    console.log('setting translations');
    ct = data;
}

function cardHtml(c) {
    var str;
    str =  '<span class="card"><span class="cwrap">';
    str += c;
    str += '</span></span>';
    return str;
}

function cardAsciiToUc(a) {
    return ''+ ct.Cards[a];
}

function cardToAscii(obj) {
    return ''+ ct.Ranks[obj.Rank] + ct.Suits[obj.Suit];
}

jQuery(document).ready(function(){
    $('.hand').sortable({
    	placeholder: 'hand-placeholder',
        //containment: 'parent',
        revert: 250,
    });
    $('.hand').disableSelection();
    
    $.ajax({
        url: "/3-13/?translations",
        dataType: 'json',
        success: setTranslations
    }).done(function() {
        $.ajax({
            url: "/3-13/test/",
            dataType: 'json',
        }).done(function(data, status) {
            var pc = cardToAscii(data.PileTop);
            pc = cardAsciiToUc(pc);
            $('#tt-pile').html(cardHtml(pc));
            $('#tt-deck').html(cardHtml('🂠'));
            console.log('got game status');
        });
    });
});
</SCRIPT>


</head>
<body>
    <div id="game-div">
     <div id="other-players"></div>
     <div id="tabletop">
         <div id="table-contents">
         <div id="tt-pile"></div>
        <div id="tt-deck"></div>
         </div>
     </div>
     <div class="hwrap">
      <ul class="hand">
       <li class="card dense"><span class="cwrap">🃙</span></li>
       <li class="card dense"><span class="cwrap">🃚</span></li>
       <li class="card dense"><span class="cwrap">🃛</span></li>
       <li class="card dense"><span class="cwrap">🃝</span></li>
       <li class="card dense"><span class="cwrap">🃞</span></li>
      </ul>
     </div>
    </div>
</body>
</html>
